<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="맨큐의 경제학 - 강의계획서 자동 생성. PDF를 업로드하면 16주 강의계획서를 AI가 자동 생성합니다.">
    <title>강의계획서 생성 | 맨큐의 경제학</title>
    <link rel="stylesheet" href="css/style.css">
    <script>
        (function () {
            const t = localStorage.getItem('mankiw_theme') ||
                (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            document.documentElement.setAttribute('data-theme', t);
        })();
    </script>
    <style>
        .syl-upload-zone {
            border: 2px dashed var(--border-light);
            border-radius: var(--radius-md);
            padding: 3rem 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--bg-secondary);
        }

        .syl-upload-zone:hover,
        .syl-upload-zone.dragover {
            border-color: var(--primary-500);
            background: rgba(99, 102, 241, 0.05);
        }

        .syl-upload-zone .up-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.4;
        }

        .syl-upload-zone .up-text {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .week-row {
            display: grid;
            grid-template-columns: 60px 1fr 160px 100px 50px;
            gap: 8px;
            align-items: center;
            padding: 12px 16px;
            border-bottom: 1px solid var(--border-light);
            transition: background 0.2s;
        }

        .week-row:hover {
            background: var(--bg-tertiary);
        }

        .week-num {
            font-weight: 700;
            color: var(--primary-400);
            font-size: 0.95rem;
            text-align: center;
        }

        .week-topic input,
        .week-method select {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid var(--border-light);
            border-radius: var(--radius-sm);
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 0.85rem;
            transition: border-color 0.2s;
        }

        .week-topic input:focus,
        .week-method select:focus {
            outline: none;
            border-color: var(--primary-500);
        }

        .week-chapter {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .week-actions button {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 4px;
            font-size: 0.9rem;
        }

        .week-actions button:hover {
            color: var(--primary-400);
        }

        .week-header {
            display: grid;
            grid-template-columns: 60px 1fr 160px 100px 50px;
            gap: 8px;
            padding: 10px 16px;
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 2px solid var(--border-light);
            background: var(--bg-tertiary);
            border-radius: var(--radius-sm) var(--radius-sm) 0 0;
        }

        .syl-meta-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 1.5rem;
        }

        .syl-meta-grid .form-group {
            margin-bottom: 0;
        }

        .syl-preview {
            background: var(--bg-secondary);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
            overflow: hidden;
        }

        .syl-preview-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-light);
        }

        .special-week {
            background: rgba(245, 158, 11, 0.06);
        }

        .special-week .week-num {
            color: var(--accent-amber);
        }

        .step-indicator {
            display: flex;
            gap: 0;
            margin-bottom: 2rem;
        }

        .step {
            flex: 1;
            text-align: center;
            padding: 14px 8px;
            font-size: 0.82rem;
            font-weight: 600;
            color: var(--text-muted);
            background: var(--bg-tertiary);
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            position: relative;
        }

        .step.active {
            color: var(--primary-400);
            border-bottom-color: var(--primary-500);
            background: var(--bg-secondary);
        }

        .step.done {
            color: var(--text-secondary);
            border-bottom-color: #10b981;
        }

        .step:first-child {
            border-radius: var(--radius-sm) 0 0 0;
        }

        .step:last-child {
            border-radius: 0 var(--radius-sm) 0 0;
        }

        .step-num {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: var(--border-light);
            font-size: 0.7rem;
            margin-right: 6px;
        }

        .step.active .step-num {
            background: var(--primary-500);
            color: #fff;
        }

        .step.done .step-num {
            background: #10b981;
            color: #fff;
        }
    </style>
</head>

<body>
    <div class="main-content">
        <div class="page-container">
            <div class="page-header">
                <h1>강의계획서 생성기</h1>
                <p>PDF 강의자료를 업로드하면 16주 강의계획서를 자동으로 만들어 드립니다</p>
            </div>

            <!-- Step Indicator -->
            <div class="step-indicator">
                <div class="step active" id="step1"><span class="step-num">1</span> 자료 업로드</div>
                <div class="step" id="step2"><span class="step-num">2</span> 기본정보 입력</div>
                <div class="step" id="step3"><span class="step-num">3</span> 계획서 편집</div>
            </div>

            <!-- ═══════════════════════════════════ -->
            <!--  STEP 1: PDF 업로드                 -->
            <!-- ═══════════════════════════════════ -->
            <div id="stepContent1">
                <div style="max-width: 700px; margin: 0 auto;">
                    <div class="syl-upload-zone" id="sylUploadZone"
                        onclick="document.getElementById('sylPdfInput').click()">
                        <div class="up-icon"><i class="fa-solid fa-cloud-arrow-up"></i></div>
                        <div class="up-text"><strong>PDF 강의자료</strong>를 업로드하세요</div>
                        <div style="color:var(--text-muted);font-size:0.8rem;margin-top:8px;">클릭 또는 드래그 앤 드롭 · PDF, TXT
                            지원 · <strong>최대 10개</strong> 동시 업로드</div>
                    </div>
                    <input type="file" id="sylPdfInput" accept=".pdf,.txt" multiple style="display:none;"
                        onchange="handleSylUpload(event)">
                    <div id="sylFileCount" class="hidden"
                        style="margin-top:1rem;text-align:center;font-size:0.85rem;color:var(--primary-400);font-weight:600;">
                    </div>
                    <div id="sylFileList" style="margin-top:0.8rem;display:flex;flex-direction:column;gap:6px;"></div>
                    <div id="sylNextBtn" class="hidden" style="margin-top:1rem;">
                        <button class="btn btn-primary w-full" onclick="goToStep(2)" style="padding:14px;">
                            <i class="fa-solid fa-arrow-right"></i>&nbsp; 다음 단계: 기본정보 입력
                        </button>
                    </div>

                    <div style="text-align: center; margin: 2rem 0 1rem; color: var(--text-muted); font-size: 0.85rem;">
                        또는</div>

                    <button class="btn btn-secondary w-full" onclick="useDefaultTextbook()" style="padding: 14px;">
                        <i class="fa-solid fa-book"></i>&nbsp; 맨큐의 경제학 제10판 기본 데이터 사용하기
                    </button>
                    <div style="font-size:0.8rem;color:var(--text-muted);text-align:center;margin-top:8px;">
                        교과서 데이터(36개 챕터)를 기반으로 강의계획서를 자동 생성합니다
                    </div>
                </div>
            </div>

            <!-- ═══════════════════════════════════ -->
            <!--  STEP 2: 기본 정보 입력              -->
            <!-- ═══════════════════════════════════ -->
            <div id="stepContent2" class="hidden">
                <div style="max-width: 700px; margin: 0 auto;">
                    <div class="content-panel" style="padding: 2rem;">
                        <h3 style="color:var(--primary-400);margin-bottom:1.5rem;">강좌 기본 정보</h3>
                        <div class="syl-meta-grid">
                            <div class="form-group">
                                <label class="form-label">과목명</label>
                                <input type="text" class="form-input" id="sylCourseName" value="경제학원론">
                            </div>
                            <div class="form-group">
                                <label class="form-label">담당교수</label>
                                <input type="text" class="form-input" id="sylProfessor" placeholder="교수명을 입력하세요">
                            </div>
                            <div class="form-group">
                                <label class="form-label">학기</label>
                                <select class="form-select" id="sylSemester">
                                    <option value="2026-1" selected>2026학년도 1학기</option>
                                    <option value="2026-2">2026학년도 2학기</option>
                                    <option value="2027-1">2027학년도 1학기</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">학점</label>
                                <select class="form-select" id="sylCredits">
                                    <option value="2">2학점</option>
                                    <option value="3" selected>3학점</option>
                                    <option value="4">4학점</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">강의 요일/시간</label>
                                <input type="text" class="form-input" id="sylSchedule" placeholder="예: 화·목 09:00~10:15">
                            </div>
                            <div class="form-group">
                                <label class="form-label">강의실</label>
                                <input type="text" class="form-input" id="sylRoom" placeholder="예: 경상관 301호">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">수업 목표</label>
                            <textarea class="form-input" id="sylObjective" rows="3" style="resize:vertical;"
                                placeholder="이 강좌의 학습 목표를 입력하세요.">맨큐의 경제학 제10판을 통해 미시경제학과 거시경제학의 기본 원리를 이해하고, 현실 경제 현상을 경제학적으로 분석하는 능력을 배양한다.</textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-label">성적 평가 기준</label>
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px;">
                                <div><label class="form-label" style="font-size:0.75rem;">중간고사 (%)</label><input
                                        type="number" class="form-input" id="sylMidterm" value="30" min="0" max="100">
                                </div>
                                <div><label class="form-label" style="font-size:0.75rem;">기말고사 (%)</label><input
                                        type="number" class="form-input" id="sylFinal" value="30" min="0" max="100">
                                </div>
                                <div><label class="form-label" style="font-size:0.75rem;">과제 (%)</label><input
                                        type="number" class="form-input" id="sylAssign" value="20" min="0" max="100">
                                </div>
                                <div><label class="form-label" style="font-size:0.75rem;">출석/참여 (%)</label><input
                                        type="number" class="form-input" id="sylAttend" value="20" min="0" max="100">
                                </div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 12px; margin-top: 1.5rem;">
                            <button class="btn btn-ghost" onclick="goToStep(1)">이전</button>
                            <button class="btn btn-primary" style="flex:1;" onclick="generateSyllabus()">강의계획서
                                생성하기</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ═══════════════════════════════════ -->
            <!--  STEP 3: 계획서 편집 & 미리보기      -->
            <!-- ═══════════════════════════════════ -->
            <div id="stepContent3" class="hidden">
                <div style="display: flex; gap: 12px; margin-bottom: 1rem; justify-content: flex-end;">
                    <button class="btn btn-ghost btn-sm" onclick="goToStep(2)"><i class="fa-solid fa-arrow-left"></i>
                        기본정보 수정</button>
                    <button class="btn btn-secondary btn-sm" onclick="printContent('syllabusPreview')"><i
                            class="fa-solid fa-print"></i> 인쇄</button>
                    <button class="btn btn-secondary btn-sm" onclick="downloadSyllabus()"><i
                            class="fa-solid fa-download"></i> 다운로드</button>
                    <button class="btn btn-primary btn-sm" onclick="resetSyllabus()"><i class="fa-solid fa-rotate"></i>
                        초기화</button>
                </div>
                <div class="syl-preview" id="syllabusPreview">
                    <!-- Generated syllabus will be rendered here -->
                </div>
            </div>

        </div>
    </div>

    <script src="js/data.js"></script>
    <script src="js/key_manager.js"></script>
    <script src="js/rag_client.js"></script>
    <script src="js/common.js"></script>
    <script src="js/syllabus_app.js"></script>
</body>

</html>